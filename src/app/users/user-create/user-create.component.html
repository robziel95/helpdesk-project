<section class="create-user">
  <h2 class="section-title">Create new user:</h2>
  <mat-spinner *ngIf="spinnerLoading"></mat-spinner>
  <mat-card class="usersInputArea">
      <form [formGroup]="form" (submit)="onSaveUser()" *ngIf="!spinnerLoading">
        <mat-form-field>
          <input matInput type="text"
          formControlName="userName"
          placeholder= "Name">
          <mat-error *ngIf="form.get('userName').invalid">Please enter a Name</mat-error>
        </mat-form-field>
        <mat-form-field>
          <input matInput
          formControlName="userSurname"
          placeholder="Surname">

          <mat-error *ngIf="form.get('userSurname').invalid">Please enter a Surname</mat-error>
        </mat-form-field>
        <mat-form-field>
            <input matInput
            formControlName="nickname"
            placeholder="Nickname">
          </mat-form-field>
        <mat-form-field>
          <input matInput
          formControlName="email"
          type="email"
          placeholder="E-mail"
          email>
          <mat-error *ngIf="form.get('email').invalid">Please enter a valid email</mat-error>
        </mat-form-field>
        <mat-form-field *ngIf="loggedUserIsAuthenticated && loggedUserIsAdmin">
          <mat-select
          formControlName="userType"
          required
          placeholder="Change user type"
          >
            <mat-option value="employee">Employee</mat-option>
            <mat-option value="specialist">Specialist</mat-option>
            <mat-option value="administrator">Administrator</mat-option>
          </mat-select>
        </mat-form-field>
        <div class="form-field-image">
          <div class=form-field-image__image *ngIf="imagePreview !== '' && imagePreview && form.get('avatar').valid  ">
            <img [src]="imagePreview" alt="Missing user avatar">
          </div>
          <div class=form-field-image__content>
            <label class="upload-file-label" for="uploadFileField">Change user avatar</label>
            <button mat-flat-button class="btn--cyan" type="button" (click)="filePicker.click()">Choose File</button>
            <input id="uploadFileField" type="file" #filePicker (change)="onImageChanged($event)">
          </div>
        </div>
        <mat-error *ngIf="form.get('avatar').invalid">Wrong file extension</mat-error>
        <mat-form-field>
          <input matInput
          formControlName="password"
          type="password"
          matInput
          placeholder= "Password">
          <mat-error *ngIf="form.get('password').invalid">Please enter a valid password.</mat-error>
        </mat-form-field>
      <button mat-raised-button type="submit" class="btn--cyan">Add User</button>
    </form>
  </mat-card>
</section>
